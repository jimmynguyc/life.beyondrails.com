---
title: "Ruby Development in Windows Revisited"
date: 2015-11-07
categories: [ruby, windows, virtualbox]
---
Some time ago I [wrote about how I set up my machine]({{< relref "2014-03-09-ruby-development-in-windows.markdown" >}}) so I can program hassle-free in ruby while running Windows. It was more of a reminder to myself than anything, if I ever needed to set things up the same way again.

Fast forward to 2015. When a colleague saw my workstation and realized I was running Windows, he was quite surprised and asked me how I was doing it. I thought of pointing him to my old blog post, but I felt that:

  * It was outdated (the setup described was from 2012, written in 2014)
  * It was incomplete (it's just a checklist of what I've installed)

I've improved on the whole setup since, and I thought it's time to share the whole updated setup so that anyone else interested can benefit.

<!--more-->

## The Magic of Virtualization

> Pay no attention to that man behind the curtain!

> [The Wizard of Oz (1939 film)](https://en.wikiquote.org/wiki/The_Wizard_of_Oz_%281939_film%29#The_Wizard)

{{< figure src="/images/ubuntu-plus-x11-forwarding.png" title="Screenshot of my desktop running Windows and having an X11-forwarded gnome-terminal and sublime-text running inside a VM" >}}

It's probably a bit misleading to say I do my ruby development _completely_ in Windows. It's not because of the graphical user interface or the hardware support; I think Windows 10 had really been a great improvement over the past Windows versions. Support for peripherals (like graphic cards, multi-monitor setups, or just [recently](link to follow soon on hackworkplay.com) 4k TV/monitors) is simply heaps better than that of Ubuntu.

Rather, it's because the Windows CLI is absolutely horrible. I've looked into some projects that attempt to alleviate the pain of the Windows CLI like [PowerShell](https://en.wikipedia.org/wiki/Windows_PowerShell) or [Console2](Console2) but for me, nothing still beats the power of a unix tty.

The easiest way to combine the two worlds is to run Ubuntu inside a virtual machine, and expose the tools I needed to Windows. I get the hardware compatibility and peripheral support of Windows, while getting the workflow efficiencies of unix.

## Write Once, Run Anywhere

> Portability is for people who cannot write new programs.

> [Linus Torvalds (tongue in cheek)](http://www.oreilly.com/openbook/opensources/book/appa.html)

I chose to use apps that have been "portabilized" because:

* I have many computers
* I like using all of them
* I prefer keeping my stuff synchronized

I'm able to do this by using a portable versions of [VirtualBox](http://www.vbox.me/) and [MobaXterm](http://mobaxterm.mobatek.net/download-home-edition.html) (an all-in-one remote terminal that comes with an X11 server). I keep my portable MobaXterm in a Dropbox folder; this allows me to sync all of my settings and bookmarks across all my devices that have Dropbox installed. For Virtualbox, I keep the files in a USB 3.0 portable drive.

During the vbox setup, I prefer to separate my home drive and my os drive; this preference saved me a lot of time and effort in the recent past. Previously, I ran my vbox server with the full [Ubuntu Gnome](https://ubuntugnome.org/) gui (I use Ubuntu Gnome because they have the version of gnome-terminal that can reflow text, something that the Mac terminals have had since forever) full-screen. I'm now running a setup that is a basic ubuntu-server installation, with all my applications being X11 forwarded.

Since I've separated out my os drive from my home drive, I can just create a new vbox with a fresh os drive and reuse the same home drive as before. All my local settings and repositories are immediately available.

## Setting it all up

> It takes these very simple-minded instructions--"Go fetch a number, add it to this number, put the result there, perceive if it's greater than this other number'--but executes them at a rate of, let's say, 1,000,000 per second. At 1,000,000 per second, the results appear to be magic."

> [Steve Jobs (playboy magazine interview, on "what a computer is")](https://web.archive.org/web/20110926012452/http://www.playboy.com/magazine/playboy-interview-steve-jobs/2)

{{< figure src="/images/IMG_20151109_002555_HDR.jpg" title="My workstation: a 40\" LG 4k display and a 1080p LG IPS display. The 1080p display is showing a webpage generated by a server running in the VM that is port forwarded to 1313. The 4k display is running sublime text and two instances of gnome-terminal. All three of them are using X11 forwarding."  >}}

VM Creation

Port forwarding

Shared folders

X11 forwarding

Packages

Chosen for minimalist reasons (except for gnome-terminal, which was chosen because it does text reflow)

* xvfb
* gnome-terminal
* rox-filer